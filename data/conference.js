const conferenceData = [];

for (let i = 1; i <= 10; i++) {
  conferenceData.push({
    img: `https://farid-singledebt.github.io/hpcl/images/awards/${i}.JPG`,
  });
}

const conferenceDiv = document.getElementById("conference-div");
let conferenceResult = "";

conferenceData
  .map((item, index) => {
    conferenceResult += `
    <div
          class="item"
        >
          <img
            src=${item.img}
            alt="Image 1"
          />
          <div class="text-center mt-2 p-2">
            <p class="fw-bold">Lorem, ipsum.</p>
            <p>Lorem ipsum dolor sit.</p>
            <button class="button mt-2 view-conference-image" data-index=${index}
          data-bs-toggle="modal"
          data-bs-target="#imgModal">View image <i class="fa fa-eye"></i/> <button/>
          </div>
        </div>
    `;
  })
  .join("");

conferenceDiv.innerHTML = conferenceResult;

document.querySelectorAll(".view-conference-image").forEach((item) => {
  item.addEventListener("click", function () {
    const index = this.getAttribute("data-index");

    const $owl = $("#modal-carousel");
    if ($owl.hasClass("owl-loaded")) {
      $owl.trigger("destroy.owl.carousel"); // Destroy current carousel
      $owl.removeClass("owl-loaded"); // Remove owl-loaded class
      $owl.find(".owl-stage-outer").children().unwrap(); // Remove wrapper generated by OwlCarousel
    }

    // Generate the Owl Carousel items with images
    let carouselItems = conferenceData
      .map(
        (conItem, i) => `
      <div class="item">
        <img src="${conItem.img}" alt="Image ${i + 1}" />
      </div>
    `
      )
      .join("");

    // Insert the carousel items into the modal
    document.getElementById("modal-carousel").innerHTML = carouselItems;

    // Re-initialize the Owl Carousel
    $("#modal-carousel").owlCarousel({
      items: 1,
      loop: true,
      nav: true,
      dots: false,
      startPosition: index,
    });
  });
});
