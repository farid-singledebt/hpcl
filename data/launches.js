const launch1Data = [];
for (let i = 1; i <= 5; i++) {
  launch1Data.push({
    img: `https://farid-singledebt.github.io/hpcl/images/launches/launch1/${i}.jpg`,
  });
}
//
const launch2Data = [];
for (let i = 1; i <= 9; i++) {
  launch2Data.push({
    img: `https://farid-singledebt.github.io/hpcl/images/launches/launch2/${i}.jpg`,
  });
}
//
const launch3Data = [];
for (let i = 1; i <= 13; i++) {
  launch3Data.push({
    img: `https://farid-singledebt.github.io/hpcl/images/launches/launch3/${i}.jpg`,
  });
}
//
const launch4Data = [];
for (let i = 1; i <= 9; i++) {
  launch4Data.push({
    img: `https://farid-singledebt.github.io/hpcl/images/launches/launch4/${i}.jpg`,
  });
}
//
const launch5Data = [];
for (let i = 1; i <= 7; i++) {
  launch5Data.push({
    img: `https://farid-singledebt.github.io/hpcl/images/launches/launch5/${i}.jpg`,
  });
}

const mainLaunchData = [];
function addFirstItems(mainArray, ...arrays) {
  arrays.forEach((array) => {
    if (array.length > 0) {
      mainArray.push(array[0]); // Push the first item if the array is not empty
    }
  });
}

// Call the function with the arrays you want to add
addFirstItems(
  mainLaunchData,
  launch1Data,
  launch2Data,
  launch3Data,
  launch4Data,
  launch5Data
);

const launchTitles = [
  {
    title: "LPG",
    body: "Click below button to view images of launches",
  },
  {
    title: "Lubes",
    body: "Click below button to view images of launches",
  },
  {
    title: "R&D",
    body: "Click below button to view images of launches",
  },
  {
    title: "Mission 60",
    body: "Click below button to view images of launches",
  },
  {
    title: "Digital initiatives",
    body: "Click below button to view images of launches",
  },
];

mainLaunchData.forEach((item, index) => {
  item.title = launchTitles[index].title;
  item.body = launchTitles[index].body;
});

const allData = {
  1: launch1Data,
  2: launch2Data,
  3: launch3Data,
  4: launch4Data,
  5: launch5Data,
};

const launchesContainer = document.getElementById("launches-container");
let mainLaunchResult = "";
mainLaunchData.map((item, index) => {
  mainLaunchResult += `
    <div class="launches-flex-box">
            <div class="launches-overlay1">
              <p>${item.body}</p>
              <button class="button button-flex view-launches-image" data-index="${index}" data-array="${
    index + 1
  }" data-bs-toggle="modal" data-bs-target="#imgModal">
                View <i class="fa fa-eye"></i>
              </button>
            </div>
            <div class="launches-overlay2">
              <h2>${item.title}</h2>
            </div>
            <img src="${item.img}" alt="Image 1" />
          </div>
    `;
}).join;
launchesContainer.innerHTML = mainLaunchResult;

document.querySelectorAll(".view-launches-image").forEach((item) => {
  item.addEventListener("click", function () {
    const index = this.getAttribute("data-index");
    const arrayNumber = this.getAttribute("data-array");
    const selectedArray = allData[arrayNumber];

    const $owl = $("#modal-carousel");
    if ($owl.hasClass("owl-loaded")) {
      $owl.trigger("destroy.owl.carousel"); // Destroy current carousel
      $owl.removeClass("owl-loaded"); // Remove owl-loaded class
      $owl.find(".owl-stage-outer").children().unwrap(); // Remove wrapper generated by OwlCarousel
    }

    // Generate the Owl Carousel items with images
    let carouselItems = selectedArray
      .map(
        (launchItem, i) => `
      <div class="item">
        <img src="${launchItem.img}" alt="Image ${i + 1}" />
      </div>
    `
      )
      .join("");

    // Insert the carousel items into the modal
    document.getElementById("modal-carousel").innerHTML = carouselItems;

    // Re-initialize the Owl Carousel
    $("#modal-carousel").owlCarousel({
      items: 1,
      loop: true,
      nav: true,
      dots: false,
      startPosition: index,
    });
  });
});
